<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Class Schedule ‚Äî Mobile First</title>
  <link rel="icon" href="favicon.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* Mobile-first custom styles (base = mobile) */
    :root{--accent:#2563eb;--muted:#6b7280}
    html,body{height:100%}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;line-height:1.3;background:#f8fafc;color:#0f172a;-webkit-font-smoothing:antialiased}

    /* App shell */
    .app-header{display:flex;align-items:center;gap:12px;padding:14px 16px;background:linear-gradient(180deg,#ffffff,#fbfdff);border-bottom:1px solid rgba(15,23,42,0.04);position:sticky;top:0;z-index:40}
    .brand-badge{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#4f46e5,#06b6d4);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    .app-title{display:flex;flex-direction:column}
    .app-title .name{font-weight:700;font-size:16px}
    .app-title .sub{font-size:12px;color:var(--muted)}

    main{padding:16px 14px 100px;max-width:900px;margin:0 auto}

    /* cards */
    .card{background:#fff;border-radius:14px;padding:14px;border:1px solid rgba(15,23,42,0.04);box-shadow:0 8px 24px rgba(2,6,23,0.04);margin-bottom:14px}
    .card h2{font-weight:700;margin-bottom:8px}
    .muted{color:var(--muted);font-size:13px}

    /* search */
    .search-input{width:100%;padding:12px;border-radius:12px;border:1px solid #eef2ff;background:linear-gradient(180deg,#ffffff,#fbfdff);box-shadow:inset 0 1px 0 rgba(2,6,23,0.02)}
    .results-list{position:relative}
    .dropdown{position:absolute;left:0;right:0;background:#fff;border:1px solid rgba(15,23,42,0.06);border-radius:10px;margin-top:6px;max-height:220px;overflow:auto;z-index:40}
    .dropdown button{display:block;width:100%;text-align:left;padding:10px 12px;border-bottom:1px solid rgba(15,23,42,0.02);background:transparent}
    .dropdown button:last-child{border-bottom:0}

    /* tags */
    .tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .tag{padding:8px 10px;border-radius:999px;background:linear-gradient(90deg, rgba(59,130,246,0.08), rgba(99,102,241,0.04));color:var(--accent);font-weight:600;font-size:13px}

    /* quick overview layout (mobile stacked) */
    .overview-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .overview-item{padding:12px;border-radius:10px;background:linear-gradient(180deg,#ffffff,#fbfdff);border:1px solid rgba(15,23,42,0.03)}
    .overview-item .big{font-weight:700;font-size:18px}

    /* upcoming list */
    .class-card{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#f8fafc);border-left:4px solid rgba(37,99,235,0.12);margin-bottom:10px}
    .class-info{display:flex;flex-direction:column}
    .class-sub{font-weight:700}
    .class-meta{font-size:13px;color:var(--muted)}

    /* tabs */
    .tabs{display:flex;gap:8px;margin-bottom:10px}
    .tab{flex:1;padding:10px;border-radius:10px;text-align:center;font-weight:700;border:1px solid rgba(15,23,42,0.04);background:#fff}
    .tab.active{background:linear-gradient(90deg,rgba(59,130,246,0.09),rgba(99,102,241,0.04));color:#1e3a8a;border-color:rgba(59,130,246,0.12)}

    /* bottom floating actions */
    .fab-row{position:fixed;left:50%;transform:translateX(-50%);bottom:14px;display:flex;gap:10px;z-index:60}
    .fab{padding:12px 18px;border-radius:999px;background:linear-gradient(90deg,var(--accent),#1d4ed8);color:white;font-weight:700;box-shadow:0 12px 40px rgba(37,99,235,0.14)}
    .fab.ghost{background:#fff;color:var(--accent);border:1px solid rgba(37,99,235,0.08);box-shadow:0 8px 24px rgba(2,6,23,0.06)}

    /* bottom nav for mobile */
    .bottom-nav{position:fixed;left:0;right:0;bottom:0;background:linear-gradient(180deg,#ffffff,#fbfdff);border-top:1px solid rgba(15,23,42,0.04);display:flex;justify-content:space-around;padding:8px 6px;z-index:70}
    .nav-btn{display:flex;flex-direction:column;align-items:center;font-size:12px;color:var(--muted);gap:4px;padding:6px}
    .nav-btn.active{color:var(--accent);font-weight:700}

    /* loader */
    .loader{width:36px;height:36px;border-radius:999px;border:4px solid #eef2ff;border-top-color:var(--accent);animation:spin 1s linear infinite;margin:8px auto}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* larger screens: add two-column layout */
    @media (min-width:1024px){
      main{padding:28px 20px}
      .layout{display:grid;grid-template-columns:360px 1fr;gap:20px}
      .bottom-nav,.fab-row{display:none}
      .app-header{padding:18px 28px}
    }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="brand-badge">SD</div>
    <div class="app-title">
      <div class="name">Student Dashboard</div>
      <div class="sub">Class Schedule</div>
    </div>
    <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
      <button id="refreshBtnTop" aria-label="Refresh" class="fab ghost" style="padding:8px 10px;font-size:14px">üîÑ</button>
    </div>
  </header>

  <main>
    <div class="layout">
      <!-- left column (mobile stacked becomes top) -->
      <div>
        <section class="card" aria-labelledby="my-subjects-heading">
          <h2 id="my-subjects-heading">‚úÖ My Subjects</h2>
          <p class="muted">Search and add the subjects you take. IDs and JS hooks are preserved.</p>

          <div style="margin-top:12px" class="results-list">
            <input id="subjectSearchInput" class="search-input" placeholder="Search and add a subject..." aria-label="Search subjects">
            <div id="searchResults" class="dropdown hidden" aria-hidden="true"></div>
          </div>

          <div id="selectedTagsContainer" class="tags" aria-live="polite"></div>

          <div style="margin-top:12px;display:flex;gap:8px">
            <button id="add-sample" class="fab ghost" style="flex:1">Browse Popular</button>
            <button id="add-manual" class="fab" style="flex:1">Add</button>
          </div>
        </section>

        <section class="card">
          <h2>Quick Overview</h2>
          <div class="overview-grid" style="margin-top:10px">
            <div class="overview-item">
              <div class="muted">Today</div>
              <div id="todayDate" class="big">(‚Äî)</div>
              <div id="todayClasses" class="muted" style="margin-top:8px"><div class="loader"></div></div>
            </div>
            <div class="overview-item">
              <div class="muted">Tomorrow</div>
              <div id="tomorrowDate" class="big">(‚Äî)</div>
              <div id="tomorrowClasses" class="muted" style="margin-top:8px"><div class="loader"></div></div>
            </div>
          </div>
        </section>

        <!-- calendar controls compact -->
        <section class="card" id="compact-controls">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h2>Upcoming</h2>
            <div class="muted" style="font-size:12px">By day or subject</div>
          </div>

          <div class="tabs" style="margin-top:10px">
            <button id="dayWiseBtn" class="tab active">By Day</button>
            <button id="subjectWiseBtn" class="tab">By Subject</button>
          </div>

          <div style="margin-top:8px" id="upcomingClassesContainer">
            <div class="loader"></div>
          </div>

        </section>

      </div>

      <!-- right column (mobile stacked becomes below) -->
      <div>
        <section class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h2>My Calendar</h2>
            <div class="muted" style="font-size:12px">Term: 10 Sep - 6 Dec</div>
          </div>

          <div style="margin-top:10px">
            <button id="showMyCalendarBtn" class="fab" style="width:100%">Show My Calendar</button>
            <div id="myCalendarResults" style="margin-top:12px"></div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px">
            <button id="downloadMonthBtn" class="fab ghost" style="flex:1;display:none">Download .ics</button>
            <button id="search-date-tab-btn" class="fab ghost" style="flex:1">Search Date</button>
          </div>
        </section>

        <section class="card hidden" id="searchByDateCard">
          <h2>Search by Date</h2>
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="datePicker" type="date" class="search-input">
            <button id="showScheduleBtn" class="fab">Show</button>
          </div>
          <div id="selectedDateClasses" style="margin-top:12px"></div>
        </section>

        <section class="card">
          <h2>Friend Match</h2>
          <p class="muted">Add a friend's subjects to find common free time.</p>
          <div style="margin-top:10px" class="results-list">
            <input id="friendSubjectSearchInput" class="search-input" placeholder="Friend's subject">
            <div id="friendSearchResults" class="dropdown hidden"></div>
          </div>
          <div id="friendSelectedTagsContainer" class="tags" style="margin-top:10px"></div>
          <button id="compareSchedulesBtn" class="fab" style="margin-top:10px">Compare</button>
          <div id="comparisonResults" style="margin-top:12px"></div>
        </section>

      </div>
    </div>
  </main>

  <!-- Mobile bottom navigation -->
  <nav class="bottom-nav" role="navigation" aria-label="Primary">
    <button class="nav-btn active" id="navSchedule">
      <span>üìö</span>
      <span>Schedule</span>
    </button>
    <button class="nav-btn" id="navCalendar">
      <span>üìÜ</span>
      <span>Calendar</span>
    </button>
    <button class="nav-btn" id="navFriends">
      <span>ü§ù</span>
      <span>Friends</span>
    </button>
    <button class="nav-btn" id="navMore">
      <span>‚ò∞</span>
      <span>More</span>
    </button>
  </nav>

  <!-- Floating action row for quick add and refresh -->
  <div class="fab-row">
    <button id="quickAddBtn" class="fab">+ Add</button>
    <button id="refreshBtn" class="fab ghost">Refresh</button>
  </div>

  <script>
    /*
      Note: I preserved all original IDs used in your existing JS so your logic should keep working.
      This mobile-first rewrite only changes layout and classes. No business logic or ID names were removed.

      Please copy your original script (from your existing class_schedule.html) and paste it below or
      into an external script file. The following placeholder is intentional to avoid duplicating script
      in the canvas preview. Replace the placeholder with your original JavaScript.
    */

    // Placeholder hook: wire up small UI interactions that won't conflict with your main script
    document.getElementById('navSchedule').addEventListener('click', ()=>{document.getElementById('navSchedule').classList.add('active');document.getElementById('navCalendar').classList.remove('active');document.getElementById('navFriends').classList.remove('active')})
    document.getElementById('navCalendar').addEventListener('click', ()=>{document.getElementById('navCalendar').classList.add('active');document.getElementById('navSchedule').classList.remove('active');document.getElementById('navFriends').classList.remove('active')})
    document.getElementById('navFriends').addEventListener('click', ()=>{document.getElementById('navFriends').classList.add('active');document.getElementById('navSchedule').classList.remove('active');document.getElementById('navCalendar').classList.remove('active')})

    // show/hide search dropdown sample (keeps original hooks safe)
    const subjectInput = document.getElementById('subjectSearchInput')
    const searchResults = document.getElementById('searchResults')
    subjectInput.addEventListener('focus', ()=>{searchResults.classList.remove('hidden');searchResults.style.display='block'})
    subjectInput.addEventListener('blur', ()=>{setTimeout(()=>{searchResults.classList.add('hidden');searchResults.style.display='none'},180)})

  </script>
</body>
</html>
